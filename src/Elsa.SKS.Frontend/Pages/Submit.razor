@page "/submit"
@using Elsa.SKS.Backend.Services.DTOs
@using Elsa.SKS.Frontend.Configuration
@using Newtonsoft.Json
@using System.Text
@inject HttpClient _httpClient
@inject AppConfiguration _appConfiguration

<SubmitParcelForm CallbackAsync="@SubmitParcel"/>

@code {
    private async Task SubmitParcel(Parcel parcel)
    {
        Console.WriteLine("Callback for parcel submit called");
        var url = $"{_appConfiguration.AppUrl}/parcel/";
        var json = JsonConvert.SerializeObject(parcel);
        var content = new StringContent(json, Encoding.UTF8, "application/json");
        await _httpClient.PostAsync(url, content);
    }
}
